<!DOCTYPE html>
<html>
<head>
    <title>案例展示 - 点奥文化</title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="http://www.dianaosj.com/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="assets/css/da-base.css" rel="stylesheet" type="text/css">
</head>

<body>
    <div class="wrapper">
        <aside class="side-wrap">
            <div class="head-top">
                <a class="logo-img"></a>
                <div class="smln">
                    <i class="line1"></i>
                    <i class="line2"></i>
                    <i class="line3"></i>
                </div>
                <div class="part-line"></div>
            </div>
            <div class="nav-wrap">
                <ul class="nav-menu">
                    <li>
                        <a href="index.html">
                            <span>首　　页</span>
                            <span class="polygon">
                                <svg width="37" height="42">
                                    <path stroke="#e0c680" transform="rotate(90 18.537029266357422,21.041734695434574)" d="m-1.46295,21.04174l8.57142,-17.68749l22.85712,0l8.57142,17.68749l-8.57142,17.68749l-22.85712,0l-8.57142,-17.68749z" stroke-width="2" fill="#36445f"/>
                                </svg>
                                <span class="fa-icn icon-01"></span>
                            </span>
                        </a>
                    </li>
                    <li class="dilve"></li>
                    <li>
                        <a href="profile.html">
                            <span>公司简介</span>
                            <span class="polygon">
                                <svg width="37" height="42">
                                    <path stroke="#e0c680" transform="rotate(90 18.537029266357422,21.041734695434574)" d="m-1.46295,21.04174l8.57142,-17.68749l22.85712,0l8.57142,17.68749l-8.57142,17.68749l-22.85712,0l-8.57142,-17.68749z" stroke-width="2" fill="#36445f"/>
                                </svg>
                                <span class="fa-icn icon-02"></span>
                            </span>
                        </a>
                    </li>
                    <li class="dilve"></li>
                    <li>
                        <a class="active" href="cases.html">
                            <span>案例展示</span>
                            <span class="polygon">
                                <svg width="37" height="42">
                                    <path stroke="#e0c680" transform="rotate(90 18.537029266357422,21.041734695434574)" d="m-1.46295,21.04174l8.57142,-17.68749l22.85712,0l8.57142,17.68749l-8.57142,17.68749l-22.85712,0l-8.57142,-17.68749z" stroke-width="2" fill="#36445f"/>
                                </svg>
                                <span class="fa-icn icon-03"></span>
                            </span>
                        </a>
                    </li>
                    <li class="dilve"></li>
                    <li>
                        <a href="contact.html">
                            <span>联系方式</span>
                            <span class="polygon">
                                <svg width="37" height="42">
                                    <path stroke="#e0c680" transform="rotate(90 18.537029266357422,21.041734695434574)" d="m-1.46295,21.04174l8.57142,-17.68749l22.85712,0l8.57142,17.68749l-8.57142,17.68749l-22.85712,0l-8.57142,-17.68749z" stroke-width="2" fill="#36445f"/>
                                </svg>
                                <span class="fa-icn icon-04"></span>
                            </span>
                        </a>
                    </li>
                    <li class="dilve"></li>
                    <li>
                        <a href="partners.html">
                            <span>合作品牌</span>
                            <span class="polygon">
                                <svg width="37" height="42">
                                    <path stroke="#e0c680" transform="rotate(90 18.537029266357422,21.041734695434574)" d="m-1.46295,21.04174l8.57142,-17.68749l22.85712,0l8.57142,17.68749l-8.57142,17.68749l-22.85712,0l-8.57142,-17.68749z" stroke-width="2" fill="#36445f"/>
                                </svg>
                                <span class="fa-icn icon-05"></span>
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="head-btm">
                <div class="part-line"></div>
                <div class="all-rights">
                    <div class="copyright">
                        <p>&copy; 2017-2018 DianAo All Rights Reserved.</p>
                    </div>
                    <div class="follow">
                        <div class="bdsharebuttonbox bdshare-button-style2-32"><a href="#" class="bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="http://www.zcool.com.cn/u/15405366" class="bds_tsina" data-cmd="" target="_blank"></a></div><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"32"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='https://ss1.baidu.com/9rA4cT8aBw9FktbgoI7O1ygwehsv/s_share.js?cdnversion='+~(-new Date()/36e5)];</script>
                    </div>
                </div>
                <div class="classroom">
                    <div class="part-line"></div>
                    <a class="schooltime" href="classroom.html"></a>
                </div>
            </div>
        </aside>
        <div class="content-wrap">
            <div class="rt-section" id="js_pageHolder">
                <div class="rt-container">
                    <a id="js_bgm" href="javascript:void(0)" class="music-circle hide"></a>
                    <div class="dark-bg"></div>
                    <div class="tiger-bg"></div>
                    <div class="home-case" id="js_anlinav">
                        <a class="bt-closed" href="javascript:void(0);"></a>
                        <a class="visual-ds" href="javascript:void(0);"></a>
                        <a class="visual-pm" href="javascript:void(0);"></a>
                    </div>
                    <div class="blackboard case-lists-bd hide">
                        <div class="blackboard-bd">
                            <div class="case-cover" id="js_visual">
                            </div>
                        </div>
                        <s class="cl-line"></s>
                        <a class="bt-closed" href="javascript:void(0);"></a>
                        <div class="category" id="js_filter">
                            <p data-name="cate"><strong>类目：</strong><a class="active" href="javascript:void(0);">全部</a><a href="javascript:void(0);">美妆类目</a><a href="javascript:void(0);">电器类目</a><a href="javascript:void(0);">食品类目</a><a href="javascript:void(0);">母婴类目</a></p>
                            <p data-name="page"><strong>类别：</strong><a class="active" href="javascript:void(0);">全部</a><a href="javascript:void(0);">首页</a><a href="javascript:void(0);">详情页</a></p>
                        </div>
                        <div class="pager" id="js_page">
                        </div>
                    </div>
                    <div class="case-detail-bd hide" id="js_casedetail">
                        <div class="img-content" h-model="desc">
                        </div>
                        <s class="cl-line"></s>
                        <a class="bt-closed" href="javascript:void(0);"></a>
                        <div class="bt-carousel">
                            <a class="prev"></a>
                            <a class="next"></a>
                        </div>
                        <div class="article-info">
                            <h1 h-model="name"></h1>
                            <div class="market"><span h-model="type"></span><br /><span h-model="cate"></span></div>
                            <div class="paragraph" h-model="profile"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="assets/js/jquery.twbsPagination.min.js"></script>
<script src="assets/js/loading.js"></script>
<script>
!function () {
    function Element(classa, initData) {
        var self = this,
            el = self.el = document.querySelector(classa),
            bindings = {},
            data = self.data = {};

        if (initData) {
            for (var variable in initData) {
                self[variable] = {
                    value: initData[variable],
                    els: []
                };
                bindings[variable] = self[variable];
            }
        }

        /* 浏览器老，不支持[].prototype.forEach
        $.each($('[h-model]'), function (i, markToken) {
            var variable = markToken.getAttribute('h-model');
            if (variable) {
                if (typeof self[variable] === 'undefined') {
                    self[variable] = {
                        value: parseInt(markToken.innerText),
                        els: []
                    };
                    bindings[variable] = self[variable];
                }
                self[variable].els.push(markToken);
            }
        });*/

        self.el.querySelectorAll('[h-model]').forEach(function (markToken) {
            var variable = markToken.getAttribute('h-model');
            if (variable) {
                if (typeof self[variable] === 'undefined') {
                    self[variable] = {
                        value: parseInt(markToken.innerText),
                        els: []
                    };
                    bindings[variable] = self[variable];
                }
                self[variable].els.push(markToken);
            }
        });

        for (var variable in bindings) {
            bind(variable);
        }

        function bind(variable) {
            Object.defineProperty(self, variable, {
                set: function (newVal) {
                    bindings[variable].value = newVal;
                    notifySubscribers(bindings[variable]);
                },
                get: function () {
                    return bindings[variable].value;
                },
                enumerable: true,
                configurable: true
            });
        }
        function notifySubscribers(accessor) {
            $.each(accessor.els, function (i, tag) {
                var $el = $(tag);
                $el.html(accessor.value);
                // $el.removeClass().addClass('flicker-up animated').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function () {
                //     $(this).removeClass();
                // });
            });
        }

    }

    // var app = new Element('#js_datamodel');
    window.Element = Element;

}();
function request(url, callback, charset, crossorigin) {
    var head = document.head || document.getElementsByTagName("head")[0] || document.documentElement;
    var baseElement = head.getElementsByTagName("base")[0];

    var IS_CSS_RE = /\.css(?:\?|$)/i;
    var currentlyAddingScript;

    var isCSS = IS_CSS_RE.test(url);
    var node = document.createElement(isCSS ? "link": "script");

    if (charset) {
        node.charset = charset;
    }

    // crossorigin default value is `false`.
    if (!(Object.prototype.toString.call(crossorigin) == '[object Undefined]')) {
        node.setAttribute("crossorigin", crossorigin);
    }

    var supportOnload = "onload" in node;
    if (supportOnload) {
        node.onload = function(){
            callback && callback.call(window);
            if (!isCSS) {
                head.removeChild(node);
            }
            
            node.onload = null;
            node = null;
        };
        node.onerror = function() {
            callback && callback.call(window);
            if (!isCSS) {
                head.removeChild(node);
            }

            node.onerror = null;
            node = null;
        }
    } else {
        node.onreadystatechange = function() {
            if (/loaded|complete/.test(node.readyState)) {
                callback && callback.call(window);
                if (!isCSS) {
                    head.removeChild(node);
                }

                node.onreadystatechange = null;
                node = null;
            }
        }
    }

    if (isCSS) {
        node.rel = "stylesheet";
        node.href = url;
    } else {
        node.async = true;
        node.src = url;
    }

    // For some cache cases in IE 6-8, the script executes IMMEDIATELY after
    // the end of the insert execution, so use `currentlyAddingScript` to
    // hold current node, for deriving url in `define` call
    currentlyAddingScript = node;

    // ref: #185 & http://dev.jquery.com/ticket/2709
    baseElement ? head.insertBefore(node, baseElement) : head.appendChild(node);

    currentlyAddingScript = null;
}
</script>
<script>
var Com = {
    resize: function(){
        var c = $('#js_pageHolder');
        var o = {
            w: 1855,
            h: 1080
        };
        var n = {
            w: c.width(),
            h: c.height()
        }

        c.children(':first').css({
            opacity: 1,
            left: (n.w - o.w)/2 + 'px',
            top: (n.h - o.h)/2 + 'px'
        });

        var aside = $('.wrapper>.side-wrap');
        if (n.w > o.w) {
            aside.css({left: (n.w - o.w)/2 + 'px'});
        }
        if (n.h > o.h) {
            aside.css({height:o.h + 'px', 'min-height':'unset', top: (n.h - o.h)/2 + 'px'});
        }
        // var ratioX = n.w/o.w;
        // var ratioY = n.h/o.h;
        // var ratio = ratioX > ratioY ? ratioX : ratioY;
        // c.children(':first').css({
        //     transform: 'scale('+ ratio +')'
        // });

        // bgm background music
        if (n.w < o.w) {
            $('#js_bgm').css({right:(o.w - n.w)/2 + 30 + 'px'});
        }
        if (n.h < o.h) {
            $('#js_bgm').css({top:(o.h - n.h)/2 + 30 + 'px'});
        }
    }
};

var g_d;
var com = {
    first: false, // 控制刚加载的时候，不显示Loading
    d: g_d,
    current: 1,
    init: function(){
        com.defaultOpts = {
            visiblePages: 8,
            startPage: 1,
            onPageClick: function (event, page) {
                if (!com.first) {$.showLoading('加载中...');}else{com.first = !com.first;}
                setTimeout(function(){
                    com.current = page;
                    com.visual();
                    if (!com.first) {$.hideLoading();}
                }, Math.random()*400 + 400);
            }
        }
        com.first = true;
        com.$pagination = $('#js_page').twbsPagination($.extend({}, com.defaultOpts, {
            totalPages: com.getPage(),
        }));

        $('#js_filter').on('click', 'a', function(e){
            $(this).addClass('active').siblings().removeClass('active');
            com.d = com.collect;
            $('#js_filter a.active').each(function(){
                var key = $(this).html();
                var name = $(this).parent().attr('data-name');
                if (key !== '全部' && key !== '') {
                    com.filterData(name, key);
                }
            });
            com.updatePage();
        });
    },
    pags: function(totalPages){
        totalPages = totalPages<1?1:totalPages;
        if (!totalPages) {
            return;
        }
        var currentPage = com.$pagination.twbsPagination('getCurrentPage');
        com.$pagination.twbsPagination('destroy');
        com.$pagination.twbsPagination($.extend({}, com.defaultOpts, {
            totalPages: totalPages
        }));
    },
    getPage: function(){
        var numb = 6;
        return Math.ceil(com.d.length/numb);
    },
    resetFilter: function(){
        $('#js_filter p').each(function(){
            $(this).find('a:first').addClass('active').siblings().removeClass('active');
        });
    },
    filterData: function(key, value){
        com.d = com.d.filter(function(v){
            return v[key] == value;
        });
    },
    updatePage: function(){
        com.pags(com.getPage());
    },
    visual: function(){
        var numb = 6;
        var c = com.current;
        var ary = com.d.slice((c - 1)*numb, c*numb);
        var temp = '';
        ary.forEach(function(d){
            temp += '<a class="cover-img" href="'+ d.href +'" target="_blank" data-case-id="'+ d.id +'" href="javascript:void(0);" style="background:url('+ d.cover +') no-repeat;background-size:cover;"></a>';
        });
        $('#js_visual').html(temp);
    },
    showType: function(name){
        com.resetFilter();
        com.d = g_d;
        switch(name){
            case 'ds':
                com.filterData('type', '电商');
                break;
            case 'pm':
                com.filterData('type', '平面');
                break;
            default:
                com.filterData('type', '电商');
                break;
        }
        com.updatePage();
        com.collect = com.d;
    }
}

function showAlert(txt){
    var $alert = $('#js_alert');
    if ($alert.length == 0) {
        var t = $('#js_pageHolder').children(':first').css('top');
        t = parseInt(t) < 0 ? Math.abs(parseInt(t)) - 40 : 0;
        $alert = $('<div id="js_alert" style="position:absolute;left:0;top:'+ t +'px;width:100%;height:40px;line-height:40px;font-size:18px;color:#fff;background-color:rgba(253,243,186,0.6);text-align:center;display:none;"></div>');
        $('#js_casedetail').append($alert);
    }
    $alert.html(txt).fadeIn();
    setTimeout(function(){
        $alert.fadeOut();
    }, 2000);
}
$(function(){
    Com.resize();
    $(window).resize(Com.resize);

    $.ajax({
        url: 'assets/cases.json',
        type: 'get',
        data: null,
        dataType: 'json',
        success: function(data){
            g_d = com.d = data.caser;
            com.init();
            parseSearch();
        }
    });
    $('#js_anlinav').on('click', function(e){
        var cls;
        var target = e.target;
        if (target.nodeType == 1 && target.nodeName.toUpperCase() == 'A') {
            cls = target.className;
        }else{
            return false;
        }
        switch(cls){
            case 'bt-closed':
                location.href = location.href.substr(0, location.href.lastIndexOf('/')) + '/index.html';
                e.preventDefault();
                e.stopPropagation();
                break;
            case 'visual-ds':
                $(this).hide();
                $('#js_pageHolder .tiger-bg').fadeOut('fast');
                $('#js_pageHolder .case-lists-bd').fadeIn('fast');
                com.showType('ds');

                e.preventDefault();
                e.stopPropagation();
                break;
            case 'visual-pm':
                $(this).hide();
                $('#js_pageHolder .tiger-bg').fadeOut('fast');
                $('#js_pageHolder .case-lists-bd').fadeIn('fast');
                com.showType('pm');

                e.preventDefault();
                e.stopPropagation();
                break;
            default:
                break;
                e.preventDefault();
                e.stopPropagation();
        }
    });
    $('#js_pageHolder .case-lists-bd .bt-closed').on('click', function(){
        $('#js_anlinav').show();
        $('#js_pageHolder .case-lists-bd').fadeOut('fast');
        $('#js_pageHolder .tiger-bg').fadeIn('fast');
    });

    var $ele = new Element('#js_casedetail');
    $('#js_visual').on('click', 'a', function(e){
        var caseid = $(this).attr('data-case-id');
        var c = g_d.filter(function(v){
            return v.id === caseid;
        })[0];

        $.showLoading('加载中...');
        if (c) {
            $ele.name = c.name;
            $ele.type = c.type;
            $ele.cate = c.cate;
            $ele.profile = c.profile;
            $ele.desc = c.desc;
        }
        setTimeout(function(){
            $('#js_pageHolder .case-lists-bd').fadeOut('fast');
            $('#js_casedetail').fadeIn('fast');
            $.hideLoading();
        }, Math.random()*400 + 400);
        e.preventDefault();
        e.stopPropagation();
    });
    $('#js_casedetail .bt-closed').on('click', function(){
        $('#js_casedetail').fadeOut('fast');
        $('#js_pageHolder .case-lists-bd').fadeIn('fast');
    });
    $('#js_casedetail .bt-carousel .prev').on('click', function(){
        var bc = $('#js_casedetail [h-model="desc"]').get(0);
        var base = 1040;
        var cc = bc.scrollTop;
        var dis = (cc - base) > 0 ? cc-base : 0;
        if (cc > 0) {
            $(bc).animate({scrollTop:dis}, 300, 'swing');
        }else{
            showAlert('已到顶，不能再翻了');
        }
    });
    $('#js_casedetail .bt-carousel .next').on('click', function(){
        var bc = $('#js_casedetail [h-model="desc"]').get(0);
        var base = 1040;
        var cc = bc.scrollTop;
        var amount = bc.scrollHeight;
        var dis = (cc + base) > amount ? amount : cc + base;
        if (cc < amount - base) {
            $(bc).animate({scrollTop:dis}, 300, 'swing');
        }else{
            showAlert('已到底，不能再翻了');
        }
    });

    function parseSearch(){
        var search = location.search;
        var param = search.match(/type=([^&]+)/);
        param = param && param[1];

        if (param === 'ds') {
            $('#js_anlinav .visual-ds').trigger('click');
        }else if (param === 'pm') {
            $('#js_anlinav .visual-pm').trigger('click');
        }else if (param === 'edit') {
            backstage();
        }
    }

    var audio = null;
    if(document.createElement("audio").canPlayType){
        audio = document.createElement("audio");
        audio.src = "assets/images/bgmusic.mp3";
        audio.autoplay = 'autoplay';
        audio.loop = false;
        $('#js_bgm').show().addClass('play');
    }
    $('#js_bgm').on('click', function(){
        if(audio.paused){
            audio.play();
            $(this).addClass('play');
        }else{
            audio.pause();
            $(this).removeClass('play');
        }
    });
    $(audio).on('ended', function(e){
        $('#js_bgm').removeClass('play');
        setTimeout(function(){
            $('#js_bgm').trigger('click');
        },120000);
    });
});
</script>
<script>
function createEvt(obj){
    var evt = document.createEvent('MouseEvents');
    evt.initEvent("click", true, true);
    obj.dispatchEvent(evt);
}
/**
 * name: 文件名
 * data: 字符串
 */
function exportRaw(name, data) {
    var urlObject = window.URL || window.webkitURL || window;
    var export_blob = new Blob([data]);
    var save_link = document.createElementNS("http://www.w3.org/1999/xhtml", "a");
    save_link.href = urlObject.createObjectURL(export_blob);
    save_link.download = name;
    createEvt(save_link);
}
function backstage() {
    request('https://cdn.bootcss.com/vue/2.5.13/vue.min.js', function(){
        exportRaw('cases.json', JSON.stringify({caser:g_d}));
    });
}
</script>
</html>
